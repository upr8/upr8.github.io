<!DOCTYPE html><html lang="en" dir="ltr"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="generator" content="Astro v5.16.8"><title>Python Testing: Callbacks | Saeed Asaiyan</title><meta name="description" content="How to write a unit-tests for modules with callbacks?"><link rel="canonical" href="https://www.asaiyan.com/en/pytest-callback/"><!-- Favicon --><link rel="icon" type="image/svg+xml" href="/images/favicon/favicon.svg"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://www.asaiyan.com/en/pytest-callback/"><meta property="og:title" content="Python Testing: Callbacks"><meta property="og:description" content="How to write a unit-tests for modules with callbacks?"><meta property="og:locale" content="en_US"><!-- Twitter --><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Python Testing: Callbacks"><meta name="twitter:description" content="How to write a unit-tests for modules with callbacks?"><meta name="twitter:site" content="https://www.asaiyan.com/en/pytest-callback/"><!-- Prevent FLoC tracking --><meta http-equiv="Permissions-Policy" content="interest-cohort=()"><!-- RSS Feed --><link rel="alternate" type="application/rss+xml" title="Saeed Asaiyan" href="/en/rss.xml"><!-- Sitemap --><link rel="sitemap" href="/sitemap-index.xml"><!-- Theme initialization script - runs before page render to prevent flash --><script>
  (function() {
    const stored = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = stored || (prefersDark ? 'dark' : 'light');

    // Set dark class on html element (body doesn't exist yet)
    document.documentElement.classList.toggle('dark', theme === 'dark');
    // Store theme for body script to use
    document.documentElement.dataset.theme = theme;
  })();
</script><link rel="stylesheet" href="/_astro/_slug_.DxWS4iZI.css"><script type="module" src="/_astro/page.sJrt8mpm.js"></script></head> <body class="bg-body font-sans body-lang-english"> <script>
      // Set body theme class (html element already has dark class from head script)
      (function() {
        const theme = document.documentElement.dataset.theme || 'light';
        document.body.classList.add(`body-theme-${theme}`);
      })();
    </script> <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50 focus:px-4 focus:py-2 focus:bg-nav focus:text-primary focus:rounded focus:outline-2 focus:outline-offset-2 focus:outline-accent-primary">
Skip to main content
</a> <div class="antialiased pt-10"> <div class="box-border max-w-full px-4 sm:mx-4 lg:max-w-4xl lg:mx-auto"> <header class="border-b-2 border-primary"> <div class="fixed top-0 left-0 right-0 z-40 px-4 sm:px-0"> <nav id="main-nav" class="transition-[background] duration-150 max-w-full sm:mx-4 lg:max-w-4xl lg:mx-auto bg-nav" role="navigation" aria-label="Main navigation and reading progress"> <div class="flex items-center justify-between px-4 py-1"> <!-- Mobile menu button --> <button type="button" id="mobile-menu-button" class="sm:hidden p-1 -ml-1 text-primary hover:text-accent-primary transition-colors" aria-expanded="false" aria-controls="mobile-menu" aria-label="Open menu"> <span id="menu-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6" aria-hidden="true"> <title>Menu</title> <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path> </svg></span> <span id="close-icon" class="hidden"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6" aria-hidden="true"> <title>Close</title> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path> </svg></span> </button> <!-- Desktop navigation --> <ul class="hidden sm:flex sm:items-center sm:gap-6 text-primary"> <li> <a href="/" class="no-underline hover:text-accent-primary transition-colors" aria-label="Navigate to home page"> Home </a> </li><li> <a href="/en/blog" class="no-underline hover:text-accent-primary transition-colors" aria-label="Navigate to blog posts"> Blog </a> </li><li> <a href="/en/library" class="no-underline hover:text-accent-primary transition-colors" aria-label="Navigate to library and book reviews"> Library </a> </li><li> <a href="/en/archive" class="no-underline hover:text-accent-primary transition-colors" aria-label="Navigate to curated archives"> Archive </a> </li><li> <a href="/en/about" class="no-underline hover:text-accent-primary transition-colors" aria-label="Navigate to about page"> About </a> </li> </ul> <!-- Theme switcher - always visible --> <div class="flex items-center"> <label for="toggleTheme" class="relative flex items-center justify-center pt-1 cursor-pointer" id="theme-switcher-label"> <input id="toggleTheme" type="checkbox" class="hidden peer" aria-label="Toggle theme"> <div class="w-10 h-4 rounded-full shadow-inner bg-body" aria-hidden="true"></div> <div id="theme-indicator" class="absolute w-5 h-5 rounded-full shadow-sm inset-y-0 left-0 top-[0.1rem] flex items-center justify-center bg-yellow-200 peer-checked:bg-gray-200 peer-checked:translate-x-full transition-all duration-300 ease-in-out" aria-hidden="true"> <!-- Sun icon --> <span id="sun-icon"> <svg class="w-3 h-3 text-yellow-800 fill-current" viewBox="0 0 2267 2267" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"> <title>Sun icon for light theme</title> <path d="M0 1133q0-39 27-66 28-26 64-26h218q37 0 61.5 27t24.5 65-24.5 64.5T309 1224H91q-37 0-64-27t-27-64zm305 739q0-37 25-65l157-152q24-25 63-25 38 0 63.5 24t25.5 61q0 39-26 68l-152 152q-65 51-131 0-25-27-25-63zm0-1477q0-37 25-65 31-26 68-26 35 0 63 26l152 157q26 24 26 63 0 38-25.5 63.5T550 639q-39 0-63-26L330 461q-25-27-25-66zm272 738q0-149 75-277.5T855.5 652t277.5-75q112 0 215 44.5t177.5 119T1644 918t44 215q0 150-74.5 278T1411 1613.5t-278 74.5-278-74.5T652 1411t-75-278zm181 0q0 156 109.5 266.5T1133 1510t266.5-110.5T1510 1133q0-154-110.5-263T1133 761q-155 0-265 109t-110 263zm284 829q0-38 26.5-64t64.5-26q39 0 65 26t26 64v212q0 39-26.5 66t-64.5 27-64.5-27-26.5-66v-212zm0-1653V91q0-37 27-64t64-27 64 27 27 64v218q0 37-26.5 61.5T1133 395t-64.5-24.5T1042 309zm589 1406q0-37 24-60 24-25 60-25 39 0 64 25l156 152q26 28 26 65t-26 63q-64 50-128 0l-152-152q-24-27-24-68zm0-1165q0-40 24-63l152-157q28-26 63-26 38 0 64.5 27t26.5 64q0 40-26 66l-156 152q-29 26-64 26-36 0-60-25.5t-24-63.5zm241 583q0-38 26-66 26-26 61-26h216q37 0 64.5 27.5t27.5 64.5-27.5 64-64.5 27h-216q-37 0-62-26.5t-25-64.5z"></path> </svg> </span> <!-- Moon icon --> <span id="moon-icon" class="hidden"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-3 h-3 text-gray-700 fill-current" aria-hidden="true" focusable="false"> <title>Moon icon for dark theme</title> <path class="heroicon-ui" d="M9.57 3.38a8 8 0 0 0 10.4 10.4 1 1 0 0 1 1.31 1.3 10 10 0 1 1-13-13 1 1 0 0 1 1.3 1.3zM7.1 5.04A8 8 0 1 0 18.3 16.27 10 10 0 0 1 7.08 5.04z"></path> </svg> </span> </div> </label> <script type="module">function m(){const t=document.getElementById("toggleTheme"),s=document.getElementById("theme-switcher-label"),d=document.getElementById("sun-icon"),o=document.getElementById("moon-icon");if(!t||!s||!d||!o)return;const c=document.documentElement.classList.contains("dark");t.checked=c,a(c),i(c),t.addEventListener("change",()=>{const e=t.checked,n=e?"dark":"light";localStorage.setItem("theme",n),document.documentElement.classList.toggle("dark",e),document.body.classList.remove("body-theme-light","body-theme-dark"),document.body.classList.add(`body-theme-${n}`),a(e),i(e)});function a(e){e?(d.classList.add("hidden"),o.classList.remove("hidden")):(d.classList.remove("hidden"),o.classList.add("hidden"))}function i(e){const n=e?"light":"dark";s?.setAttribute("aria-label",`Switch to ${n} theme`),t.setAttribute("aria-label",`Theme switcher, currently ${e?"dark":"light"} mode`)}}m();document.addEventListener("astro:after-swap",m);</script> </div> </div> <!-- Mobile navigation menu --> <div id="mobile-menu" class="sm:hidden overflow-hidden transition-all duration-300 ease-in-out bg-nav max-h-0 opacity-0"> <ul class="flex flex-col px-4 pb-4 pt-2 space-y-2 text-primary"> <li> <a href="/" class="block py-2 no-underline hover:text-accent-primary transition-colors mobile-nav-link" aria-label="Navigate to home page"> Home </a> </li><li> <a href="/en/blog" class="block py-2 no-underline hover:text-accent-primary transition-colors mobile-nav-link" aria-label="Navigate to blog posts"> Blog </a> </li><li> <a href="/en/library" class="block py-2 no-underline hover:text-accent-primary transition-colors mobile-nav-link" aria-label="Navigate to library and book reviews"> Library </a> </li><li> <a href="/en/archive" class="block py-2 no-underline hover:text-accent-primary transition-colors mobile-nav-link" aria-label="Navigate to curated archives"> Archive </a> </li><li> <a href="/en/about" class="block py-2 no-underline hover:text-accent-primary transition-colors mobile-nav-link" aria-label="Navigate to about page"> About </a> </li> </ul> </div> </nav> </div> <script type="module">function m(){const i=document.getElementById("main-nav"),e=document.getElementById("mobile-menu-button"),t=document.getElementById("mobile-menu"),o=document.getElementById("menu-icon"),s=document.getElementById("close-icon"),u=document.querySelectorAll(".mobile-nav-link");if(!i||!e||!t||!o||!s)return;let n=!1;e.addEventListener("click",()=>{n=!n,c()}),u.forEach(a=>{a.addEventListener("click",()=>{n=!1,c()})});function c(){n?(t.classList.remove("max-h-0","opacity-0"),t.classList.add("max-h-64","opacity-100"),o.classList.add("hidden"),s.classList.remove("hidden"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-label","Close menu")):(t.classList.add("max-h-0","opacity-0"),t.classList.remove("max-h-64","opacity-100"),o.classList.remove("hidden"),s.classList.add("hidden"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label","Open menu"))}function l(){const a=window.scrollY,v=document.documentElement.scrollHeight,g=window.innerHeight,r=v-g,d=r>0?a/r*100:0;i.style.background=`linear-gradient(to right, var(--color-bg-nav-progress) 0%, var(--color-bg-nav-progress) ${d}%, var(--color-bg-nav) ${d}%, var(--color-bg-nav) 100%)`}window.addEventListener("scroll",l,{passive:!0}),l()}m();document.addEventListener("astro:after-swap",m);</script> <div class="pt-16 pb-8 text-center"> <h1 class="text-4xl md:text-5xl font-extrabold text-primary leading-tight tracking-tight"> Python Testing: Callbacks </h1> <p class="mt-3 text-lg md:text-xl font-medium text-secondary max-w-2xl mx-auto"> How to write a unit-tests for modules with callbacks? </p> </div> </header> <main id="main-content" class="box-border min-w-0 m-0 leading-relaxed tracking-normal">   <article class="mt-8"> <!-- Article content --> <div class="post-body"> <h2 id="introduction">Introduction<a class="autolink-hdrs" aria-hidden="true" tabindex="-1" href="#introduction"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg></span></a></h2>
<p>When it comes to detecting events within a function, callback functions offer a reliable approach. By passing a function pointer along with other arguments, you can ensure that a specific function is executed when a particular event occurs. While this pattern is widely used in structured languages like C, it is less prevalent in languages such as Python. However, there are libraries in Python that make use of this pattern to address certain challenges.</p>
<p>Recently, I encountered a situation where I needed to utilize a library that employed callback functions. In this blog post, we will explore this library and dive into its testing methodology, utilizing the Pytest library. By understanding how to effectively test callback functions, we can ensure their proper functionality and enhance the reliability of our codebase.</p>
<h2 id="prepare-the-running-environment">Prepare the running environment<a class="autolink-hdrs" aria-hidden="true" tabindex="-1" href="#prepare-the-running-environment"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg></span></a></h2>
<p>For running the following codes, I used <code>python-3.10</code> and <code>pytest</code> package. You can
install <code>pytest</code> using the following code:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> pytest</span></span></code></pre>
<h2 id="a-use-case-call-a-function-on-every-even-number">A use-case: call a function on every even number<a class="autolink-hdrs" aria-hidden="true" tabindex="-1" href="#a-use-case-call-a-function-on-every-even-number"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg></span></a></h2>
<p>The function <code>process_even_numbers</code> takes two parameters: <code>numbers</code>, which is the input array of numbers, and <code>callback</code>, which is the function to be called for each even number.</p>
<p>Within the function, we iterate over each element num in the numbers array. Using the modulo operator %, we check if num is divisible by 2, i.e., an even number. If it is, we call the <code>callback</code> function and pass the even number num as an argument.</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="python"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> process_even_numbers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(numbers, callback):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> numbers:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            callback(num)</span></span></code></pre>
<p>This simple function can be called within the following code:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="python"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> print_number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(num):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;Even number: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">num</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">numbers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">process_even_numbers(numbers, print_number)</span></span></code></pre>
<h3 id="testing-the-function-without-pytest-mock">Testing the function: without Pytest-mock<a class="autolink-hdrs" aria-hidden="true" tabindex="-1" href="#testing-the-function-without-pytest-mock"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg></span></a></h3>
<p>A very basic approach can be writing a custom class that can play the role of
a stub function, like the following <code>mock_callback_class</code> class:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="python"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> mock_callback_class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.callback_called </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __call__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, num):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.callback_called </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> reset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.callback_called </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> False</span></span></code></pre>
<p>And then we can use <code>pytest</code> to write different test cases for this function such as the following code:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="python"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> test_empty_array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mock_callback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mock_callback_class()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # Test case 1: Empty array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    numbers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    process_even_numbers(numbers, mock_callback)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    assert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mock_callback.callback_called</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> test_array_with_even_numbers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mock_callback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mock_callback_class()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # Test case 2: Array with even numbers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    numbers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">14</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    process_even_numbers(numbers, mock_callback)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mock_callback.callback_called </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> True</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> test_array_with_no_even_numbers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mock_callback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mock_callback_class()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # Test case 3: Array with no even numbers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    numbers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    process_even_numbers(numbers, mock_callback)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    assert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mock_callback.callback_called</span></span></code></pre>
<p>In this way, we test some aspects of the following code:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -vv</span></span></code></pre>
<p><img src="/_astro/test-case-method-1.BSOuUzDO_1tPhD9.webp" alt="Test result for the first approach" loading="lazy" decoding="async" fetchpriority="auto" width="1330" height="163"></p>
<p>However, what if we want to verify that the callback function was called with the correct arguments?
Additionally, what if we want to check if the callback function was called multiple times?
While we could add these features to our <code>mock_callback_class</code>, it brings the question
of why we should spend time reinventing the wheel.</p>
<h3 id="testing-the-function-with-pytest-mock">Testing the function: with Pytest-mock<a class="autolink-hdrs" aria-hidden="true" tabindex="-1" href="#testing-the-function-with-pytest-mock"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg></span></a></h3>
<p>For using this library, you can install this package by the following command:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> pytest-mock</span></span></code></pre>
<p>We can rewrite the test cases in the previous section as follows:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="python"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pytest_mock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> MockerFixture</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> test_empty_array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(mocker: MockerFixture):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mock_callback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mocker.Mock(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">return_value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # Test case 1: Empty array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    numbers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    process_even_numbers(numbers, mock_callback)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    assert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mock_callback.called</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> test_array_with_even_numbers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(mocker: MockerFixture):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mock_callback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mocker.Mock(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">return_value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # Test case 2: Array with even numbers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    numbers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">14</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    process_even_numbers(numbers, mock_callback)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mock_callback.called</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mock_callback.assert_has_calls(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            mocker.call(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            mocker.call(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            mocker.call(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">14</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">        any_order</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> test_array_with_no_even_numbers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(mocker: MockerFixture):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mock_callback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mocker.Mock(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">return_value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    # Test case 3: Array with no even numbers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    numbers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    process_even_numbers(numbers, mock_callback)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    assert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mock_callback.called</span></span></code></pre>
<p>As you can see, in <code>test_array_with_even_numbers</code> we checked the number of calls
and their argument. Using <code>pytest-mock</code> gives us a lot of features that we can use
in different use cases.</p>
<p>By running pytest, we can see the same result as the following:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word" tabindex="0" data-language="bash"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -vv</span></span></code></pre>
<p><img src="/_astro/test-case-method-2.dcS9nDU-_Z13kLRb.webp" alt="Test result for the second approach" loading="lazy" decoding="async" fetchpriority="auto" width="1342" height="159"></p>
<h2 id="conclution">Conclution<a class="autolink-hdrs" aria-hidden="true" tabindex="-1" href="#conclution"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg></span></a></h2>
<p>In this article, we investigated the performance of a method of using the <code>pytets-mock</code>.
You can download the code for the first method from <a href="./test_callback_class.py">(test_callback_class.py)</a>
and the code for the second method from <a href="./test_callback_mock.py">(test_callback_mock.py)</a>.</p>
<p>To view the documents related to the <code>pytest</code>, you can check its <a href="https://pytest-mock.readthedocs.io/en/latest/" rel="noreferrer" target="_blank">documentation website</a>.</p> </div> <!-- Article metadata at the end --> <div class="mt-8 text-sm text-secondary"> <div class="mt-32"> <p class="mt-8 text-center text-secondary">Tags of this Post:</p> <ul class="flex flex-wrap items-baseline mt-2 ms-1 @md:mt-0 justify-center"> <li class="z-10 inline-block px-2 m-1 text-sm border-2 rounded-full shadow-xs bg-nav text-primary"> <a href="/en/tag/python" class="no-underline hover:text-accent-primary transition-colors">
#python </a> </li><li class="z-10 inline-block px-2 m-1 text-sm border-2 rounded-full shadow-xs bg-nav text-primary"> <a href="/en/tag/pytest" class="no-underline hover:text-accent-primary transition-colors">
#pytest </a> </li><li class="z-10 inline-block px-2 m-1 text-sm border-2 rounded-full shadow-xs bg-nav text-primary"> <a href="/en/tag/callback-functions" class="no-underline hover:text-accent-primary transition-colors">
#callback-functions </a> </li><li class="z-10 inline-block px-2 m-1 text-sm border-2 rounded-full shadow-xs bg-nav text-primary"> <a href="/en/tag/mocking" class="no-underline hover:text-accent-primary transition-colors">
#mocking </a> </li><li class="z-10 inline-block px-2 m-1 text-sm border-2 rounded-full shadow-xs bg-nav text-primary"> <a href="/en/tag/software-testing" class="no-underline hover:text-accent-primary transition-colors">
#software-testing </a> </li> </ul> </div> </div> </article>   </main> <footer class="box-border flex flex-row justify-between pt-4 mt-8 mb-4 border-t-2 border-primary"> <p class="text-center align-middle text-secondary">
Copyright &copy; 2026 by <a href="/en/about" class="font-medium no-underline hover:text-accent-primary transition-colors" aria-label="Navigate to about page">Saeed Asaiyan</a>.
</p> <ul class="flex justify-center" aria-label="Social media and feed links"> <li class="mx-4"> <a href="/en/rss.xml" target="_blank" rel="noreferrer" aria-label="Subscribe to RSS feed (opens in new tab)"> <svg class="w-8 h-8 fill-current text-secondary" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"> <title>RSS Feed</title> <path d="M6.18 15.64a2.18 2.18 0 1 1 0 4.36 2.18 2.18 0 0 1 0-4.36m12.18 4.36A14.38 14.38 0 0 0 4 5.64v3.09a11.28 11.28 0 0 1 11.27 11.27h3.09M13.09 20a9.27 9.27 0 0 0-9.09-9.09v3.09A6.18 6.18 0 0 1 10 20h3.09"></path> </svg> </a> </li> <li class="mx-4"> <a href="https://github.com/upr8" target="_blank" rel="noreferrer" aria-label="Visit GitHub profile (opens in new tab)"> <svg class="w-8 h-8 fill-current text-secondary" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"> <title>GitHub</title> <path d="M12 .3a12 12 0 00-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.07 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 016 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 011.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0012 .3"></path> </svg> </a> </li> </ul> </footer> </div> </div> </body></html> <script type="module">const a='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425z"/></svg>';document.querySelectorAll(".post-body pre").forEach(t=>{const e=document.createElement("button");e.className="copy-button",e.setAttribute("aria-label","Copy code"),e.insertAdjacentHTML("beforeend",a),e.addEventListener("click",async()=>{const o=t.querySelector("code")?.textContent||"";await navigator.clipboard.writeText(o),e.classList.add("copied"),e.replaceChildren(),e.insertAdjacentHTML("beforeend",c),setTimeout(()=>{e.classList.remove("copied"),e.replaceChildren(),e.insertAdjacentHTML("beforeend",a)},2e3)}),t.appendChild(e)});</script>