---
title: 'CMake: ExternalProject_Add'
date: '2018-03-20'
lang: 'en'
type: 'blog'
published: false
desc: 'How to add another project in the build process?'
tags: ['cpp', 'cmake', 'build-tool']
---

## Introduction


## Usecase: using fmt



### C++ file

```cpp
#include <fmt/format.h>

int main(){
    std::string message = fmt::format("The answer is {}\n", 42);
    fmt::print(message);
    std::string tm = "1516711026";
    fmt::print("{:.{}}\n",tm, 5);
    return 0;
}
```

### CMake file

```cmake
cmake_minimum_required(VERSION 3.0)

project(download-fmt)

SET(CMAKE_FIND_LIBRARY_SUFFIXES ".a")
SET(BUILD_SHARED_LIBRARIES OFF)
SET(CMAKE_EXE_LINKER_FLAGS "-static")

include(ExternalProject)
ExternalProject_Add(fmt
    GIT_REPOSITORY https://github.com/fmtlib/fmt
    GIT_TAG 4.1.0
    SOURCE_DIR "${CMAKE_BINARY_DIR}/fmt/src"
    BINARY_DIR "${CMAKE_BINARY_DIR}/fmt/build"
    INSTALL_DIR "${CMAKE_BINARY_DIR}/fmt/install"
    CMAKE_ARGS -DCMAKE_INSTALL_PREFIX=${CMAKE_BINARY_DIR}/fmt/install
    )
set(FMT_INCLUDE_DIRS "${CMAKE_BINARY_DIR}/fmt/install/include/" )
set(FMT_LINKER_FLAGS "-L${CMAKE_BINARY_DIR}/fmt/install/lib -lfmt")

set(THREADS_PREFER_PTHREAD_FLAG ON)
find_package(Threads REQUIRED)

add_executable(fmtest main.cc)
add_dependencies(fmtest fmt)
target_link_libraries(fmtest Threads::Threads ${FMT_LINKER_FLAGS})
include_directories(${FMT_INCLUDE_DIRS})
```

### Result



## conclusion


