---
import { getCollection, render } from 'astro:content';
import type { PagesEntry } from '@/types';
import BaseLayout from '@/layouts/BaseLayout.astro';

const lang = 'en';
const dir = 'ltr';

// Get home page content
const pages = await getCollection('pages', (entry: PagesEntry) =>
  entry.data.published && entry.data.lang === lang && entry.id.includes('home')
);

const homePage = pages[0];
let Content: any = null;

if (homePage) {
  const rendered = await render(homePage);
  Content = rendered.Content;
}
---

<BaseLayout
  title={homePage?.data.title || 'Home'}
  description={homePage?.data.desc || ''}
  lang={lang}
  dir={dir}
>
  <article class="post-body prose max-w-prose mt-8">
    {Content && <Content />}
    {!Content && (
      <p class="text-secondary">
        Welcome! Content coming soon.
      </p>
    )}
  </article>
</BaseLayout>
